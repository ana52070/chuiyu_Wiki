---
title: 配置环境
author: chuiyu
date: 2025-10-19 08:00:00
description: 1.配置环境
tags:
  - ROS2
permalink: /pages/65ae81
categories:
  - guide
  - ROS2
  - CLI
---

#### 1.配置环境


##### 1.导入设置文件
1.您需要在每次打开新的Shell时运行此命令以便访问ROS 2命令，如下所示：
```
source /opt/ros/humble/setup.bash
```

如果您不想每次打开新的shell时都要进行源命令设置（跳过任务1），您可以将该命令添加到您的shell启动脚本中：
```
echo "source /opt/ros/humble/setup.bash" >> ~/.bashrc
```
要撤销此操作，请找到您系统的shell启动脚本，并删除附加的源命令。


##### 2.检查环境变量
使用ROS 2设置文件会设置几个操作ROS 2所必需的环境变量。如果您在查找或使用ROS 2软件包时遇到问题，请确保您的环境已经正确设置，可以使用以下命令：
```
printenv | grep -i ROS
```

检查变量，如 `ROS_DISTRO` 和 `ROS_VERSION` 是否设置正确。
```bash
chuiyu@chuiyu:~$ printenv | grep -i 
ROS ROS_VERSION=2 
ROS_PYTHON_VERSION=3 
ROS_DOMAIN_ID=1 
AMENT_PREFIX_PATH=/opt/ros/humble 
PYTHONPATH=/opt/ros/humble/lib/python3.10/site-packages:/opt/ros/humble/local/lib/python3.10/dist-packages LD_LIBRARY_PATH=/usr/lib/x86_64-linux-gnu/gazebo-11/plugins:/opt/ros/humble/opt/rviz_ogre_vendor/lib:/opt/ros/humble/lib/x86_64-linux-gnu:/opt/ros/humble/lib ROS_LOCALHOST_ONLY=0 PATH=/opt/ros/humble/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin ROS_DISTRO=humble
```
如果环境变量没有正确设置，请返回到您所遵循的安装指南的 ROS 2 包安装部分。如果您需要更具体的帮助（因为环境设置文件可能来自不同的地方），您可以从社区 [获取答案](https://robotics.stackexchange.com/)。


**2.1 ROS_DOMAIN_ID 变量**
有关 ROS 域 ID 的详细信息，请参阅 [域 ID](http://fishros.org/doc/ros2/humble/Concepts/Intermediate/About-Domain-ID.html) 文章。

确定了ROS 2节点组的唯一整数后，可以使用以下命令设置环境变量：
```bash
export ROS_DOMAIN_ID=<your_domain_id>


# 为了在不同的shell会话之间保持这个设置，可以将该命令添加到shell启动脚本中：
echo "export ROS_DOMAIN_ID=<your_domain_id>" >> ~/.bashrc
```

**2.2 ROS_LOCALHOST_ONLY 变量**

默认情况下，ROS 2通信不限于本地主机。`ROS_LOCALHOST_ONLY`环境变量允许您将ROS 2通信限制为仅限本地主机。这意味着您的ROS 2系统及其主题、服务和操作将对本地网络上的其他计算机不可见。在某些情况下，使用``ROS_LOCALHOST_ONLY``非常有帮助，比如在教室中，多个机器人可能会向同一主题发布，从而导致奇怪的行为。您可以使用以下命令设置环境变量：
```bash
export ROS_LOCALHOST_ONLY=1

# 为了在不同的shell会话之间保持这个设置，可以将该命令添加到shell启动脚本中：
echo "export ROS_LOCALHOST_ONLY=1" >> ~/.bashrc
```
##### 总结

在使用之前，需要正确配置ROS 2开发环境。可以通过两种方式实现：要么在每次打开新的shell时使用源文件，要么将源命令添加到启动脚本中。

如果您在使用ROS 2时遇到任何定位或使用软件包的问题，首先应该检查您的环境变量，并确保其设置为您预期的版本和发行版。



